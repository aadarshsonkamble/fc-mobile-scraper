name: Scrape Ultra Final Missing FC Mobile Players (10 parallel)

on:
  workflow_dispatch:

jobs:
  scraper-1:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 1
        env:
          SCRAPER_NUM: "1"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-1-results
          path: |
            players_stats_1.csv
            players_skills_1.json
            failed_stats_1.txt
          if-no-files-found: warn

  scraper-2:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 2
        env:
          SCRAPER_NUM: "2"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-2-results
          path: |
            players_stats_2.csv
            players_skills_2.json
            failed_stats_2.txt
          if-no-files-found: warn

  scraper-3:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 3
        env:
          SCRAPER_NUM: "3"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-3-results
          path: |
            players_stats_3.csv
            players_skills_3.json
            failed_stats_3.txt
          if-no-files-found: warn

  scraper-4:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 4
        env:
          SCRAPER_NUM: "4"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-4-results
          path: |
            players_stats_4.csv
            players_skills_4.json
            failed_stats_4.txt
          if-no-files-found: warn

  scraper-5:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 5
        env:
          SCRAPER_NUM: "5"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-5-results
          path: |
            players_stats_5.csv
            players_skills_5.json
            failed_stats_5.txt
          if-no-files-found: warn

  scraper-6:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 6
        env:
          SCRAPER_NUM: "6"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-6-results
          path: |
            players_stats_6.csv
            players_skills_6.json
            failed_stats_6.txt
          if-no-files-found: warn

  scraper-7:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 7
        env:
          SCRAPER_NUM: "7"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-7-results
          path: |
            players_stats_7.csv
            players_skills_7.json
            failed_stats_7.txt
          if-no-files-found: warn

  scraper-8:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 8
        env:
          SCRAPER_NUM: "8"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-8-results
          path: |
            players_stats_8.csv
            players_skills_8.json
            failed_stats_8.txt
          if-no-files-found: warn

  scraper-9:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 9
        env:
          SCRAPER_NUM: "9"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-9-results
          path: |
            players_stats_9.csv
            players_skills_9.json
            failed_stats_9.txt
          if-no-files-found: warn

  scraper-10:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install aiohttp beautifulsoup4 requests

      - name: Run scraper 10
        env:
          SCRAPER_NUM: "10"
        run: python stats_scrape.py

      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: scraper-10-results
          path: |
            players_stats_10.csv
            players_skills_10.json
            failed_stats_10.txt
          if-no-files-found: warn
